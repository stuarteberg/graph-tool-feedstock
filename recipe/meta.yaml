{% set version = "2.29" %}
{% set sha1 = "0bbe18b9c1d20e76f8d3e029713093e3ddc326f9" %}

package:
  name: graph-tool
  version: {{ version }}

source:
  fn: graph-tool-{{ version }}.tar.bz2
  url: https://downloads.skewed.de/graph-tool/graph-tool-{{ version }}.tar.bz2
  sha1: {{ sha1 }}
  patches:
    - patches/no-obsoloete-compiler-version-flag.patch

build:
  skip: true  # [win]
  number: 1
  detect_binary_files_with_prefix: true

requirements:
  build:
    - pkg-config
    #- {{ compiler("cxx") }}
    - clangxx_osx-64=8.*  # [osx]
    - gxx_linux-64=8.*    # [linux]
    
  host:
    - python
    - numpy
    - boost
    - expat
    - scipy >=1.0
    - cgal 4.14*
    - sparsehash 2.0.*
    - cairomm
    - pycairo
    
  run:
    - python
    - boost
    - expat
    - scipy >=1.0
    - {{ pin_compatible('numpy') }}
    - cgal >=4.14
    - sparsehash >=2.0
    - cairomm
    - pycairo

test:
  imports:
    - graph_tool
    - graph_tool.all

about:
  home: https://graph-tool.skewed.de/
  license: GPLv3
  license_file: LICENSE
  summary: Efficient network analysis

extra:
  recipe-maintainers:
    - stuarteberg
